<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.thymeleaf.org">

<head th:replace="fragment::header">


    <title></title></head>

<body id="page-top">

<!-- Page Wrapper -->
<div id="wrapper">

    <!-- Sidebar -->
    <div th:replace="fragment::sidebar"></div>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

        <!-- Main Content -->
        <div id="content">

            <!-- Topbar -->
            <div th:replace="fragment::topbar"></div>
            <!-- End of Topbar -->

            <!-- Begin Page Content -->
            <div class="container-fluid">
                <h1 class="fs-5 text-center mb-2">Manager Book</h1>
                <div class="container row">
                    <form action="/updateBook" th:object="${bookDto}" method="post" enctype="multipart/form-data">

                        <div class="mb-3">
                            <label for="id" class="col-form-label">ID:</label>
                            <input th:value="${book.id}" type="text" readonly class="form-control" name="id" id="id">
                        </div>

                        <div class="mb-3">
                            <label for="name" class="col-form-label">Book name:</label>
                            <input th:field="${bookDto.title}" type="text" class="form-control"
                                   id="name">
                            <p th:if="${#fields.hasErrors('title')}" th:errorclass="text-danger"
                               th:errors="${bookDto.title}"></p>
                        </div>

                        <div class="mb-3">
                            <label for="author" class="col-form-label">Author:</label>
                            <input th:field="${bookDto.author}" type="text" class="form-control"
                                   id="author">
                            <p th:if="${#fields.hasErrors('author')}" th:errorclass="text-danger"
                               th:errors="${bookDto.author}"></p>
                        </div>

                        <div class="mb-3">
                            <label for="categories">Book category:</label>
                            <select th:field="${bookDto.category.id}" name="categories" id="categories" class="form-control">
                                <option th:value="null" >Select</option>
                                <option th:each="category : ${categories}" th:value="${category.id}"
                                        th:text="${category.name}"
                                ></option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="description">Description:</label>
                            <textarea th:field="${bookDto.description}" class="form-control"
                                      name="description" id="description" cols="30" rows="5"></textarea>
                            <p th:if="${#fields.hasErrors('description')}" th:errorclass="text-danger"
                               th:errors="${bookDto.description}"></p>
                        </div>

                        <div class="mb-3">
                            <label for="costPrice">Price:</label>
                            <input th:field="${bookDto.costPrice}" type="number" id="costPrice"
                                   class="form-control">
                            <p th:if="${#fields.hasErrors('costPrice')}" th:errorclass="text-danger"
                               th:errors="${bookDto.costPrice}"></p>
                        </div>

                        <div class="mb-3">
                            <label for="quantity">Quantity:</label>
                            <input th:field="${bookDto.currentQuantity}" type="text" id="quantity"
                                   class="form-control">
                            <p th:if="${#fields.hasErrors('currentQuantity')}"
                               th:errorclass="text-danger" th:errors="${bookDto.currentQuantity}"></p>
                        </div>

                        <div class="mb-3">
                            <label>Images:</label><br>
                            <img th:src="@{'data:image/jpeg;base64,' + ${book.image}}" alt="" width="150">

                        </div>

                        <div class="mb-3">
                            <label for="image">Select img:</label>
                            <input name="imageBook" type="file" id="image"
                                   class="form-control">

                        </div>

                        <div class="mb-3">
                            <button type="submit" class="btn btn-outline-primary">Update</button>
                            <a th:href="@{/manager-books}" type="button" class="btn btn-danger">Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
            <!-- /.container-fluid -->

        </div>
        <!-- End of Main Content -->

        <!-- Footer -->
        <div th:replace="fragment::footer"></div>
        <!-- End of Footer -->

    </div>
    <!-- End of Content Wrapper -->

</div>
<!-- End of Page Wrapper -->

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<!-- Logout Modal-->
<div th:replace="fragment::layoutModal"></div>

<div th:replace="fragment::script"></div>

</body>

</html>